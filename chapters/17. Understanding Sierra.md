*Table of Contents
 
1. Before Sierra
2. The Pitfalls of Cairo 0x
3. What is Sierra
4. The Architecture - How it Works & The Sierra Code
5. The Present & future
6. Conclusion

### Before Sierra
In Cairo 0, developers would write Starknet contracts in Cairo, compile them to CASM, and deploy the compilation output directly on Starknet. Users could then interact with Starknet contracts by calling smart contract functions, signing a transaction, and sending it to the sequencer. The sequencer would run the transaction to get the user’s transaction fee, the prover (SHARP) would generate the proof for the batch including this transaction, and the sequencer would charge a fee for including the transaction in a block.


## The Pitfalls of Cairo Ox
- Only valid statements can be proven in Cairo, so failed transactions cannot get proven. It is impossible to prove an invalid statement like assert 0 = 1, as it translates to polynomial constraints that can't be satisfied.
- Transaction execution may fail, resulting in the transaction not being included in a block. In this case, the sequencer does free work. Since failed transactions don’t have valid proofs, they can’t be included, and there is no way to enforce fee transfer for the sequencer.
- The sequencer can be subjected to DDoS attacks with invalid transactions, causing them to work for nothing and not collect any fee for running these transactions.
- It is impossible to distinguish between censorship (when a sequencer purposefully decides not to include certain transactions) and invalid transactions since both types of transactions will not be included in blocks.

### Sierra
Sierra (Safe Intermediate Representation) is an intermediate layer between the high-level language Cairo and compilation targets such as Cairo Assembly (CASM).
 Sierra is the bridge between our past and the future.
### The Architecture
Sierra is correct-by-construction, letting the sequencer charge a fee for all transactions. 

you can generate readable Sierra output for your contracts by using the make sierra command in the Minimal Cairo 1.0 Template. This effectively runs cairo-compile . -r on your code. While Sierra is reported as stabilized, the present examples are accurate as of March 2023.


The Sierra output is organized into 4 separate sections always presented in the same order. 
1. type declarations.
2. Declarations of built-in library functions. 
3. The sequence of statements 
The declared Cairo functions.

image.png
### Conclusion
The best Solidity developers can program in Yul (an intermediate language used in Solidity code compilation) and possess a thorough understanding of EVM. This knowledge not only enables them to identify security vulnerabilities but also enables them to optimize their code for efficiency.

By studying Sierra code, we can gain a deeper understanding of the underlying type system, identify security risks and enhance efficiency, such as reducing storage requirements or execution steps in functions with high recursion.
Smart contract developers and auditors in Cairo must not hesitate to delve into Sierra to comprehend how their contracts operate. Although there is much more going on behind the scenes, Sierra offers an ideal balance between readability and insights.

